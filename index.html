<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Tyneceploh Educational Foundation</title>
  <style>
    body {
      margin: 0;
      font-family: 'Segoe UI', sans-serif;
      background: #fdf2f7;
      color: #4b2e2e;
    }
    header {
      background-color: #d63384;
      color: white;
      padding: 1rem;
      text-align: center;
    }
    nav {
      background-color: #4b2e2e;
      padding: 1rem;
      text-align: center;
    }
    nav button {
      margin: 0.5rem;
      padding: 0.75rem 1.5rem;
      background-color: #d63384;
      border: none;
      color: white;
      border-radius: 8px;
      font-size: 1rem;
      cursor: pointer;
    }
    nav button:hover {
      background-color: #a02363;
    }
    section {
      padding: 2rem;
      max-width: 800px;
      margin: auto;
      background: #fff;
      border-radius: 12px;
      box-shadow: 0 4px 10px rgba(0,0,0,0.1);
      margin-bottom: 2rem;
    }
    h2 {
      color: #d63384;
      margin-top: 2rem;
    }
    .announcement {
      border: 1px solid #d63384;
      padding: 12px;
      margin-bottom: 12px;
      border-radius: 8px;
      background: #ffe4f1;
    }
    .announcement h3 {
      margin: 0 0 6px;
      color: #a02363;
    }
    .announcement small {
      color: #7a486b;
      font-size: 0.85em;
    }
    footer {
      background-color: #4b2e2e;
      color: white;
      text-align: center;
      padding: 1rem;
      margin-top: 2rem;
    }
    #announcements {
      min-height: 50px;
    }
  </style>
</head>
<body>
  <header>
    <h1>Tyneceploh Educational Foundation</h1>
    <p>Nursery â€“ 9th Grade | Rehab Road, ELWA, Liberia</p>
  </header>

  <nav>
    <button onclick="location.href='student_login.html'">Student Login</button>
    <button onclick="location.href='teacher_login.html'">Teacher Login</button>
    <button onclick="location.href='principal_login.html'">Principal Login</button>
    <button onclick="location.href='results.html'">Check Results</button>
  </nav>

  <section>
    <h2>Our Vision</h2>
    <p>To educate and empower future leaders with moral values, academic excellence, and lifelong skills.</p>

    <h2>Our Mission</h2>
    <p>We strive to provide a quality, affordable, and safe learning environment that promotes intellectual, social, and spiritual growth.</p>

    <h2>School History</h2>
    <p>
      Tyneceploh Educational Foundation was founded in 2018 to serve students from Nursery to 9th Grade. The school was established to close the educational gap in the Rehab Road community. It currently hosts 100 students and 10 teachers, aiming to provide holistic and accessible learning to all children.
    </p>

    <h2>Announcements</h2>
    <div id="announcements">Loading announcements...</div>

    <h2>Contact Us</h2>
    <p>ðŸ“ž 0778847625 | 0777515669 | 0886515669</p>
    <p>ðŸ“§ tyneceploheducational2018@gmail.com</p>
  </section>

  <footer>
    &copy; 2025 Tyneceploh Educational Foundation. All rights reserved.
  </footer>

  <script>
    const announcementsContainer = document.getElementById('announcements');
    const baseUrl = "https://script.google.com/macros/s/AKfycbw9P_XOd4k498l0e4WDbFqAF1asb2u4sRj_uX2B-2S1MvyWOeWQZqxy8dr13mPOdNOeuw/exec";

    // Escape HTML to prevent XSS
    function escapeHtml(text) {
      return text.replace(/[&<>"']/g, function(m) {
        return {'&':'&amp;', '<':'&lt;', '>':'&gt;', '"':'&quot;', "'":'&#39;'}[m];
      });
    }

    async function loadAnnouncements() {
      announcementsContainer.textContent = 'Loading announcements...';
      try {
        const res = await fetch(baseUrl + '?action=getAnnouncements');
        if (!res.ok) throw new Error('Network response was not ok');

        const data = await res.json();

        if (data.success && data.announcements.length > 0) {
          announcementsContainer.innerHTML = '';
          data.announcements.forEach(item => {
            const dateStr = new Date(item.date).toLocaleDateString();
            const div = document.createElement('div');
            div.className = 'announcement';
            div.innerHTML = `
              <h3>${escapeHtml(item.title || 'No Title')}</h3>
              <small>${dateStr}</small>
              <p>${escapeHtml(item.message || '')}</p>
            `;
            announcementsContainer.appendChild(div);
          });
        } else {
          announcementsContainer.textContent = 'No announcements at this time.';
        }
      } catch (err) {
        announcementsContainer.textContent = 'Failed to load announcements: ' + err.message;
      }
    }

    // Load announcements when page loads
    window.addEventListener('DOMContentLoaded', loadAnnouncements);
  </script>
</body>
</html>
